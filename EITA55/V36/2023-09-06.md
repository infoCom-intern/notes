# EITA55

## Sjätte föreläsningen, 2023-09-06

### Grundproblemen: Nätarkitektur

- Olika utbredningsmedier
- Signalerna ser inte likadana ut
- Ramarna ser inte likadana ut
- Adresser på MAC-lagret ser inte likadana ut

### Lösning: Nätprotokoll

Fysisk -> Länk m. länkprotokoll -> Nätverk m. nätprotokoll

### Global adressering

- När en dator skall hittas i ett annat nät räcker inte längre den lokala länk-adressen
- Alla datorer skall kommunicera och måste därför ha en nätadress, som är uppbyggd som en postadress
- Nätadressen talar även om i vilket nät som mottagaren befinner sig i

### Länklagret IRL (person till person i **närheten**)

1. Vilka datorer finns i närheten?
2. Skicka!

### Länklagret IRL (person till person på **avstånd**)

1. Skicka
2. "Brevlåda" Lund
3. Färdas via en annan länk
4. Postcentrum Götebord
5. Skicka till rätt adress

### Vad innebär det egentligen?

Header + Regler

Alla uppkopplade enheter måste använda samma protokoll, t.ex IPv4. Headers av samma typ måste också finnas till den skickade informationen.

### IPv4-adresser vs. _vanliga_ adresser

Tunavägen 39, 223 63, Lund, Sweden

-> Sverige blir avgränsat
-> Postnummret avgör vilken del av Sverige
-> Kan inte finnas fler likadana adresser i detta postnummer
-> Success

### IPv4-adresser

- Består av 32 bitar

  - 232 = 2564 = 4294967296

- Skrivs som fyra tal med punkter emellan

  - 130.235.202.173

- Har två delar
  - en nätidentitet (nät-id)
  - en värdidentitet (värd-id)
  - 130.235.200 är institutionens nätidentitet

### Adressexempel IPv4

- Adress: 222.23.67.68
- Mask: 255.255.192.0
- CIDR: 222.23.67.68 / 18

### Vad hända med IPv5?

- IPv5: Internet Stream Protocol

  - Utvecklad för strömmande media och röst över IP
  - Aldrig allmänt antagen som en standard

- Varför inte IPv5?
  - Begränsad funktion jämfört med IPv4
  - Överlappade inte direkt med v4 eller v6

### Varför IPv6?

- Adressbrist

  - IPv4 har 32-bitars adresser, ca 4 miljarder möjliga adresser
  - IPv6 har 128-bitars adresser, ca 340 undecellion (3.4 x 10^38)

- Internet of things (IoT)

  - IoT-enheter kräver en mycket större adressrymd

- Säkerhet

  - Inbyggda säkerhetsfunktioner

- Effektivitet
  - Förenklad header-struktur för snabbare routing

### Adressexempel IPv6

- Inledande 0or i grupp får strykas
- Flera grupper med 0or får föras samman
  - Noters med tomt mellan semikolon
  - Bara en sådan förkortning per adress

### Olika typer av länkar

Exempel:

- En cykel
- Radio
- Fiber
- En val

Det som binder olika sorts länkar kallas en **brygga**.

### Nytt problem: Koppla länk- med nät-adress?

- För att skicka ramar på LAN måste vi använda länkadresser
- Men i nät-paketet finns bara den globala nätadressen

- Lösning!
- Para ihop global adress med länkadress (adress mapping) -> ARP

Varje nod är ansvarig för att skicka ett paket vidare på sin länk

### Från IP-adress till MAC-adress

- Adressöversättning: ARP och NDP används föra tt översätta nätverksadresser (IPv4/IPv6) till fysiska adresser (MAC-adresser)
- IPv4: ARP används för att koppla IPv4 adresser till MAC-adresser i lokala nät som Ethernet
- IPv6: NDP utför samma uppgift i IPv6-nätverk

### Broadcast-domän

- Ett lokalt nät som består av länkar, repeterare och bryggor utgör en så kallad broadcast-domän
- En broadcast-ram som skickas ut på nätet når samtliga domäner
- En broadcast-domän kan inte bli hur stor som helst

### Adress Resolution Protocol

- Om ARP saknar den efterfrågade MAC-adressen i sin tabell, skickar den ett ARP request message till samtliga anslutna datorer i det lokala nätverket.

- Om IPv4-adressen tillhör ett annat nät skickas paketet till den vägväljare som kopplar ihop det lokala nätet med omvärlden

### "Routing" i en värddator

- ARP tabell
- Default gateway: Routern
- Värddatorn måste veta

  - Finns destinationen på eget nät/LAN?
  - Om inte, vilken är vägen ut från nätet/LANet?

- Jämför egen nät-id med destinationens
  - samma: ARP request efter destinationens MAC-adress
  - olika: ARP request efter default gateways MAC-adress

### Portadresser

- För att flera applikationer skall kunna vara igång samtidit på en dator använder TCP och UDP sig av så kallade portadresser
- Det finns ett antal fördefinierade portadresser så att ex. email alltid kommer till samma port.

### Transportprotokoll

- För att en användarapplikation inte skall behöva bry sig om vilka nät som kommunikationen sker över, finns det i varje värddator ett transportprotokoll
- Transportprotokollets uppgift är att få över informationen till mottagarapplikationen

### Inkapsling

Varenda gång vi lägger till ett nytt lager i OSI stacker, behöver vi lägga på en ny header

Applikation
Transport
Nät
Länk
Fysisk länk

### Varför så många lager?

- Fördelar med lagerindelning:

  - Modularitet: Lättare att designa, implementera och felsöka
  - Flexibilitet: Möjliggör olika teknologier på olika lager

- Varför utbytbarhet?
  - Skalbarhet: Möjliggör uppgraderingar och expansion
  - Kombabilitet: Förenklar sammankoppling av olika teknologier och leverantörer

### Förbindelsefri dataöverföring

I förbindelsefri dataöverföring sätts ingen förbindelse upp utan all data skickas direkt

### Överblick

#### OSI Lager 1: Fysiska

Standard för att överföra signaler på ett utbredningsmedium, till exempel Ethernet.

#### OSI Lager 2: Länk

Tillför ramstruktur och tillförlitlig överföring på en länk. Till exempel, ethernet.

#### OSI Lager 3: Nät

Skapar möjlighet att kommunicera över nät, genom bland annat global adressering. Till exempel: IP

#### OSI Lager 4: Transport

Möjliggör tillförlitligt överföring över best-effort-när samt introducerar portaer. Till exempel: TCP & UDB.

#### OSI Lager 7: Applikation

Applikations-specifika protokoll för ett visst syfte. Till exempel: HTTP.

### OSI Lager 5-6:

- Session: Ex: PAP
- Presentation: Ex: AFP

### Nästa föreläsning

- Protokoll i flera skikt
- Fragmentering
- Vägval
- DNS
